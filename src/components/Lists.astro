---
import data from '../static/data.json';
import ImgIco from '../components/ImgIco.astro';

let lists = data;
try {
    const response = await fetch(`${Astro.url}/api/get`);
    if (response.ok) {
        const json = await response.json();
        lists = json.data.lists;
    }
} catch (error) {
    //
}
---

<div class="grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 py-8">
    {lists.map((item: any) => (
        <a
            class="flex gap-3 bg-white rounded-2xl p-5 items-start cursor-pointer select-none overflow-hidden group hover:shadow-lg dark:bg-black/50"
            target="_blank"
            href={item.url}
        >
            <ImgIco icon={item.icon} title={item.title} />
            <div class="w-0 flex-1">
                <h3 class="font-medium truncate text-gray-900 dark:text-gray-50 text-sm md:text-lg  transition group-hover:text-[#0b7b94] dark:group-hover:text-[#6cc3d7]">
                    {item.title}
                </h3>
                {item.author && <p class="opacity-70 truncate text-xs md:text-sm mt-1">by <span class="text-[#0b7b94] dark:text-[#64aebf]">{item.author}<span></p>}
                <p class="text-gray-500 mt-1 text-xs md:text-sm dark:text-gray-400">
                    {item.description}
                </p>
            </div>
        </a>
    ))}
</div>